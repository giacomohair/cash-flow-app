:root {
  --accent:#FF385C; --accent-700:#E03152;
  --bg:#F7F7F7; --panel:#FFFFFF; --muted:#F5F6F8; --line:#E6E7EB; --text:#222;
  --green:#008A5A; --red:#D93025;
  --warn-bg:#FFF1F0;
  --chip-bg:#EEF2FF; --chip-text:#3730A3;
  --lightgreen:#f0fdf4; --lightred:#fef2f2; --lightgray:#f3f4f6;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
/* Header */
header{position:sticky;top:0;z-index:30;background:var(--panel);border-bottom:1px solid var(--line)}
.bar{max-width:1400px;margin:0 auto;padding:12px 16px;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.hamburger{border:none;background:transparent;font-size:22px;cursor:pointer}
h1{margin:0;font-size:18px;letter-spacing:.2px}
.spacer{flex:1}
/* Tabs Toolbar */
.toolbar{max-width:1400px;margin:0 auto;padding:0 16px 8px 16px}
.tablist{display:flex;gap:6px;flex-wrap:wrap;border-bottom:1px solid var(--line);padding-bottom:8px}
.tab{border:1px solid var(--line);background:#fff;padding:6px 10px;border-radius:999px;cursor:pointer}
.tab[aria-selected="true"]{background:linear-gradient(180deg,var(--accent),var(--accent-700));color:#fff;border-color:transparent}
.tabpanes{background:var(--panel);border-bottom:1px solid var(--line)}
.tabpane{display:none;padding:10px 16px}
.tabpane.show{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
select,button,input[type="number"],input[type="date"]{
  border:1px solid var(--line);background:#fff;padding:8px 10px;border-radius:999px;cursor:pointer;color:inherit
}
input[type="number"]{border-radius:10px;width:110px}
input[type="date"]{padding:6px 10px;border-radius:10px}
button.primary{background:linear-gradient(180deg,var(--accent),var(--accent-700));color:#fff;border:none}
button.primary:active{transform:translateY(1px)}
button.ghost{background:transparent}
/* Layout */
.wrap{max-width:1400px;margin:0 auto;padding:16px}
.cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin-bottom:12px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:4px}
.card h3{margin:0;font-size:12px;opacity:.7;text-transform:uppercase}
.card .big{font-size:22px;font-weight:700}
.card .sub{font-size:12px;opacity:.75}
.bad{color:var(--red);font-weight:700}
.chips{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}
.chip{background:var(--chip-bg);color:var(--chip-text);padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid var(--line)}
/* Panel + table */
.panel{background:var(--panel);border:1px solid var(--line);border-radius:12px;overflow:auto}
table{border-collapse:separate;border-spacing:0;width:100%}
thead th{position:sticky;top:0;background:var(--muted);border-bottom:1px solid var(--line);text-align:right;padding:8px 10px;white-space:nowrap}
thead tr.periods th{top:0}
thead tr.weeks th{top:32px}
thead th.sticky{text-align:left;left:0;z-index:3;position:sticky}
tbody td{padding:6px 8px;border-bottom:1px solid var(--line);text-align:right}
tbody td.sticky{position:sticky;left:0;background:inherit;z-index:2;text-align:left}
tbody tr.section td.sticky{background:var(--muted);font-weight:700}
tbody tr.section td{color:#6B7280}
.section.inflows td.sticky{color:var(--green)}
.section.outflows td.sticky{color:var(--red)}
.section.balances td.sticky{color:#0F172A}
/* Light row backgrounds */
tr.inflow-row{background:var(--lightgreen)}
tr.outflow-row{background:var(--lightred)}
tr.adjustment-row{background:var(--lightgray)}
/* Inputs */
input.cell{width:100px;padding:6px 8px;text-align:right;border:1px solid var(--line);border-radius:8px;background:#fff}
input.cell:disabled{opacity:.7;background:#f3f4f6;cursor:not-allowed}
th .toggle{cursor:pointer;color:#2563eb}
/* EoP alert styling */
.danger{color:var(--red);font-weight:600}
.danger-bg{background:var(--warn-bg)}
/* Drawer */
.drawer{position:fixed;inset:0;z-index:40;display:none}
.drawer.show{display:block}
.drawer .overlay{position:absolute;inset:0;background:rgba(0,0,0,.25)}
.drawer .panel{position:absolute;top:0;left:0;height:100%;width:320px;background:var(--panel);border-right:1px solid var(--line);padding:16px;overflow:auto}
.drawer .panel h2{margin:0 0 8px 0}
.drawer a{display:block;padding:10px 8px;border-radius:8px;color:inherit;text-decoration:none;border:1px solid var(--line);margin-bottom:8px;background:#fff}
/* Mobile bottom bar */
.mobilebar{
  position:fixed;left:0;right:0;bottom:0;z-index:25;background:var(--panel);
  border-top:1px solid var(--line);display:none;gap:8px;justify-content:space-between;align-items:center;
  padding:8px 12px;
}
.mobilebar .btn{
  border:1px solid var(--line);background:#fff;padding:8px 10px;border-radius:10px;cursor:pointer;color:inherit;font-size:13px
}
.mobile-only{display:none}
@media (max-width: 980px){
  .cards{grid-template-columns:1fr}
  input.cell{width:80px}
  .mobilebar{display:flex}
  .mobile-only{display:inline-block}
  .desktop-only{display:none}
  body{padding-bottom:58px}
}
input.cell:focus{outline:2px solid #93c5fd;} .iconbtn{margin-left:6px}